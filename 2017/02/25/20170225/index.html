<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>尝试Swift搭建服务器-建立自己的网站 · Ghcoder</title><meta name="description" content="尝试Swift搭建服务器-建立自己的网站 - Ghcoder"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/solarized-light.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Ghcoder"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="https://avatars1.githubusercontent.com/u/3142935?v=3&amp;s=466 or file" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">尝试Swift搭建服务器-建立自己的网站</h1><div class="tags"><a href="/tags/Swift/" class="tag-title">#Swift</a></div><div class="post-info">Feb 25, 2017</div><div class="post-content"><h2 id="学习Paul大神的swift-server，我也尝试用Swift来搭建自己的网站。这里主要依赖的是IBM开源的Kitura框架。"><a href="#学习Paul大神的swift-server，我也尝试用Swift来搭建自己的网站。这里主要依赖的是IBM开源的Kitura框架。" class="headerlink" title="学习Paul大神的swift-server，我也尝试用Swift来搭建自己的网站。这里主要依赖的是IBM开源的Kitura框架。"></a>学习Paul大神的swift-server，我也尝试用Swift来搭建自己的网站。这里主要依赖的是IBM开源的Kitura框架。</h2><h3 id="环境搭建-（Mac下）"><a href="#环境搭建-（Mac下）" class="headerlink" title="环境搭建 （Mac下）"></a>环境搭建 （Mac下）</h3><ol>
<li>因为我们是在自己的mac上搭建环境，所以需要下载Docker[<a href="https://docs.docker.com/docker-for-mac/" target="_blank" rel="external">https://docs.docker.com/docker-for-mac/</a>] 这个软件，这个软件的作用就相当于一台看不见的虚拟机，能够在mac上运行Linux。</li>
<li>下载完成之后，建立根目录文件夹。</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd ~/Desktop</div><div class="line">mkdir server</div><div class="line">cd server</div><div class="line">docker run -itv $(pwd):/projects --name projects -w /projects -<span class="selector-tag">p</span> <span class="number">8089</span>:<span class="number">8089</span> -<span class="selector-tag">p</span> <span class="number">8090</span>:<span class="number">8090</span> -<span class="selector-tag">p</span> <span class="number">5984</span>:<span class="number">5984</span> twostraws/server-side-swift /bin/bash</div></pre></td></tr></table></figure>
<p>3 . 这里docker开头的命令，是让doker软件来运行的，其中’/projects’ 指的是文件内建立以projects开头的文件默认指向的是当前的文件路径，并且建立的8090、5984这两个端口。</p>
<p>4 . 建立好之后你就会看到类似如下的返回值：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">root<span class="variable">@f2429f0045db</span><span class="symbol">:/projects</span><span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="建立第一个文件"><a href="#建立第一个文件" class="headerlink" title="建立第一个文件"></a>建立第一个文件</h3><ol>
<li>运行如下命令：</li>
</ol>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> ~/Desktop/server</div><div class="line"><span class="built_in">mkdir</span> project1</div><div class="line"><span class="keyword">cd</span> project1</div><div class="line">swift package init --<span class="built_in">type</span> <span class="built_in">executable</span></div></pre></td></tr></table></figure>
<h4 id="最后一行命令可能比较困惑，其实这行命令就是告诉swift-package（这里的swift-package相当于OC中的cocoapods、或者NodeJS中的npm一样）-我们需要建立一个新的项目，’–type-executable‘的意思是我们希望建立一个独立的部分。看到如下返回值就代表成功了："><a href="#最后一行命令可能比较困惑，其实这行命令就是告诉swift-package（这里的swift-package相当于OC中的cocoapods、或者NodeJS中的npm一样）-我们需要建立一个新的项目，’–type-executable‘的意思是我们希望建立一个独立的部分。看到如下返回值就代表成功了：" class="headerlink" title="最后一行命令可能比较困惑，其实这行命令就是告诉swift package（这里的swift package相当于OC中的cocoapods、或者NodeJS中的npm一样）,我们需要建立一个新的项目，’–type executable‘的意思是我们希望建立一个独立的部分。看到如下返回值就代表成功了："></a>最后一行命令可能比较困惑，其实这行命令就是告诉swift package（这里的swift package相当于OC中的cocoapods、或者NodeJS中的npm一样）,我们需要建立一个新的项目，’–type executable‘的意思是我们希望建立一个独立的部分。看到如下返回值就代表成功了：</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Creating executable package: project1</div><div class="line">Creating Package<span class="selector-class">.swift</span></div><div class="line">Creating <span class="selector-class">.gitignore</span></div><div class="line">Creating Sources/</div><div class="line">Creating Sources/main<span class="selector-class">.swift</span></div><div class="line">Creating Tests/</div></pre></td></tr></table></figure>
<p>2 .运行：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">swift </span><span class="keyword">build</span></div></pre></td></tr></table></figure>
<p>3 . 再运行</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">.build/debug/project1</span></div></pre></td></tr></table></figure>
<p>当看到”Hello world!”就代表已经成功了。</p>
<p>4 .再运行</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">swift <span class="keyword">package</span> <span class="keyword">generate</span>-xcodeproj</div></pre></td></tr></table></figure>
<p>此时用Xcode打开刚刚生成的project1.xcodeproj,切换project1&gt;Sources&gt;project1,当控制台中打印“Hello world!”</p>
<p>5 . 找到Main.swift文件，更换内容，我们引入路由模块，并且实例化，并且监听8090端口</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">import</span> Kitura</div><div class="line"></div><div class="line"><span class="keyword">let</span> <span class="attr">router</span> = Router()</div><div class="line"></div><div class="line">Kitura.addHTTPServer(onPort: <span class="number">8090</span>, <span class="keyword">with</span>: router)</div><div class="line">Kitura.run()</div></pre></td></tr></table></figure>
<p>此时打开浏览器”<a href="http://localhost:8090&quot;,大功告成！！！" target="_blank" rel="external">http://localhost:8090&quot;,大功告成！！！</a></p>
<h3 id="环境搭建-（Linux下）"><a href="#环境搭建-（Linux下）" class="headerlink" title="环境搭建 （Linux下）"></a>环境搭建 （Linux下）</h3><ol>
<li><p>先下载适合你Linux版本的Swift的版本[<a href="https://swift.org/download/" target="_blank" rel="external">https://swift.org/download/</a>]</p>
</li>
<li><p>其实这里Kitura的官网给出了教程，你也可以按照官方的教程走下去。[<a href="http://www.kitura.io/en/starter/settingup.html" target="_blank" rel="external">http://www.kitura.io/en/starter/settingup.html</a>]</p>
</li>
</ol>
<figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></div><div class="line">$ sudo apt-<span class="built_in">get</span> install clang libicu-<span class="built_in">dev</span> libcurl4-openssl-<span class="built_in">dev</span> libssl-<span class="built_in">dev</span></div></pre></td></tr></table></figure>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export <span class="built_in">PATH</span>=&lt;<span class="built_in">path</span> to uncompressed tar contents&gt;/usr/bin:$<span class="built_in">PATH</span></div></pre></td></tr></table></figure>
<p>2 .这里已经介绍解释的很清楚了，就是将&lt;&gt;以及其中的内容替换成你刚才下载并解压下来的Swift包路径，假设我的路径为/home/gh/swift-3.0.2-release/, 那就可以在终端运行：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">export</span> PATH=/<span class="built_in">home</span>/gh/swift<span class="number">-3.0</span><span class="number">.2</span>-<span class="built_in">release</span>/usr/bin:$PATH</div></pre></td></tr></table></figure>
<p>3 .紧接着运行,看到正常的返回就代表已经安装正常。</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">swift <span class="comment">--version</span></div></pre></td></tr></table></figure>
<p>4 .下面的方法步骤就和之前在Mac上的配置是一样的了，你也可以参考Kitura的教程[<a href="http://www.kitura.io/en/starter/gettingstarted.html" target="_blank" rel="external">http://www.kitura.io/en/starter/gettingstarted.html</a>]</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/03/15/20170315/" class="prev">PREV</a><a href="/2016/12/01/20161201/" class="next">NEXT</a></div><div class="copyright"><p>© undefined - 2017 <a href="http://yoursite.com">Ghcoder</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" crossorigin="anonymous"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.js" crossorigin="anonymous"></script><script>$(document).ready(function() { $('pre').each(function(i, block) { hljs.highlightBlock(block); }); });</script></body></html>