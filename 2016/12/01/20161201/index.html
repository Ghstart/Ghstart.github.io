<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>学习阿里开源项目BeeHive(三) · Ghcoder</title><meta name="description" content="学习阿里开源项目BeeHive(三) - Ghcoder"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/solarized-light.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Ghcoder"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="https://avatars1.githubusercontent.com/u/3142935?v=3&amp;s=466 or file" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">STACKOVERFLOW</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">学习阿里开源项目BeeHive(三)</h1><div class="tags"><a href="/tags/学习/" class="tag-title">#学习</a></div><div class="post-info">Dec 1, 2016</div><div class="post-content"><h3 id="最后总结一下整个BeeHive项目的搭建。以及我看完之后的一些质疑和想法，有些作者以及给出了回答，会在下一版本的更新中进行修改。"><a href="#最后总结一下整个BeeHive项目的搭建。以及我看完之后的一些质疑和想法，有些作者以及给出了回答，会在下一版本的更新中进行修改。" class="headerlink" title="最后总结一下整个BeeHive项目的搭建。以及我看完之后的一些质疑和想法，有些作者以及给出了回答，会在下一版本的更新中进行修改。"></a>最后总结一下整个BeeHive项目的搭建。以及我看完之后的一些质疑和想法，有些作者以及给出了回答，会在下一版本的更新中进行修改。</h3><hr>
<h4 id="先贴上我自己画的一个提纲"><a href="#先贴上我自己画的一个提纲" class="headerlink" title="先贴上我自己画的一个提纲"></a>先贴上我自己画的一个提纲</h4><h2 id=""><a href="#" class="headerlink" title="  "></a><img src="http://ohhvhrib5.bkt.clouddn.com/images/step1.png">  </h2><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="http://ohhvhrib5.bkt.clouddn.com/images/step3.png"></h2><h4 id="首先，为什么每个ViewController都需要配备一个配备一个Module的文件？"><a href="#首先，为什么每个ViewController都需要配备一个配备一个Module的文件？" class="headerlink" title="首先，为什么每个ViewController都需要配备一个配备一个Module的文件？"></a>首先，为什么每个ViewController都需要配备一个配备一个Module的文件？</h4><h2 id="因为他需要通过-void-load-的方法，动态的将moduleInfo的信息存储下来，这里是存储在BHModuleManager文件中的self-BHModules此时这里存储的都是字符串，还没有创建为实例对象。"><a href="#因为他需要通过-void-load-的方法，动态的将moduleInfo的信息存储下来，这里是存储在BHModuleManager文件中的self-BHModules此时这里存储的都是字符串，还没有创建为实例对象。" class="headerlink" title="因为他需要通过+(void)load{}的方法，动态的将moduleInfo的信息存储下来，这里是存储在BHModuleManager文件中的self.BHModules此时这里存储的都是字符串，还没有创建为实例对象。"></a>因为他需要通过<code>+(void)load{}</code>的方法，动态的将<code>moduleInfo</code>的信息存储下来，这里是存储在<code>BHModuleManager</code>文件中的<code>self.BHModules</code><em>此时这里存储的都是字符串，还没有创建为实例对象</em>。</h2><h4 id="为什么有些module的文件中没有load方法，但是他还是在启动之前也注册进去了呢？答：因为这里作者都是通过宏的的形式，来快速实现加载的信息，本质上和-void-load-是一样的。"><a href="#为什么有些module的文件中没有load方法，但是他还是在启动之前也注册进去了呢？答：因为这里作者都是通过宏的的形式，来快速实现加载的信息，本质上和-void-load-是一样的。" class="headerlink" title="为什么有些module的文件中没有load方法，但是他还是在启动之前也注册进去了呢？答：因为这里作者都是通过宏的的形式，来快速实现加载的信息，本质上和+(void)load{}是一样的。"></a>为什么有些<code>module</code>的文件中没有load方法，但是他还是在启动之前也注册进去了呢？答：因为这里作者都是通过<code>宏</code>的的形式，来快速实现加载的信息，本质上和<code>+(void)load{}</code>是一样的。</h4><h2 id="BH-EXPORT-MODULE-NO"><a href="#BH-EXPORT-MODULE-NO" class="headerlink" title="BH_EXPORT_MODULE(NO)  "></a><em>BH_EXPORT_MODULE(NO)</em>  </h2><h4 id="这里在官方的demo中看到TestAppDelegate进行了ModuleConfigName、ServiceConfigName的设置，不设置可以吗？答：可以！！这里在BHContext对象实例化的时候，已经默认设置了初始值了。"><a href="#这里在官方的demo中看到TestAppDelegate进行了ModuleConfigName、ServiceConfigName的设置，不设置可以吗？答：可以！！这里在BHContext对象实例化的时候，已经默认设置了初始值了。" class="headerlink" title="这里在官方的demo中看到TestAppDelegate进行了ModuleConfigName、ServiceConfigName的设置，不设置可以吗？答：可以！！这里在BHContext对象实例化的时候，已经默认设置了初始值了。"></a>这里在官方的demo中看到TestAppDelegate进行了ModuleConfigName、ServiceConfigName的设置，不设置可以吗？答：可以！！这里在<code>BHContext</code>对象实例化的时候，已经默认设置了初始值了。</h4><hr>
<h4 id="这里假如我有新的功能，我应该往哪里去添加呢？答：这里只是我的猜想-gt-应该在BHContext中去添加，因为在BHContext实例化的时候，就顺带实例化了一系列的对象：BHShortCutItem、BHOpenURLItem、BHNotificationItem、BHUserActivity、BHConfig-并且这些对象都是单例，这里我保持我的态度。这里的if调试时作者的笔误，他会在下一版本更新-if-BHInstance-isKindOfClass-BHContext-class"><a href="#这里假如我有新的功能，我应该往哪里去添加呢？答：这里只是我的猜想-gt-应该在BHContext中去添加，因为在BHContext实例化的时候，就顺带实例化了一系列的对象：BHShortCutItem、BHOpenURLItem、BHNotificationItem、BHUserActivity、BHConfig-并且这些对象都是单例，这里我保持我的态度。这里的if调试时作者的笔误，他会在下一版本更新-if-BHInstance-isKindOfClass-BHContext-class" class="headerlink" title="这里假如我有新的功能，我应该往哪里去添加呢？答：这里只是我的猜想-&gt;应该在BHContext中去添加，因为在BHContext实例化的时候，就顺带实例化了一系列的对象：BHShortCutItem、BHOpenURLItem、BHNotificationItem、BHUserActivity、BHConfig,并且这些对象都是单例，这里我保持我的态度。这里的if调试时作者的笔误，他会在下一版本更新 if ([BHInstance isKindOfClass:[BHContext class]]) {}"></a>这里假如我有新的功能，我应该往哪里去添加呢？答：<em>这里只是我的猜想</em>-&gt;应该在<code>BHContext</code>中去添加，因为在<code>BHContext</code>实例化的时候，就顺带实例化了一系列的对象：<code>BHShortCutItem</code>、<code>BHOpenURLItem</code>、<code>BHNotificationItem</code>、<code>BHUserActivity</code>、<code>BHConfig</code>,并且这些对象都是单例，这里我保持我的态度。<em>这里的if调试时作者的笔误，他会在下一版本更新 if ([BHInstance isKindOfClass:[BHContext class]]) {}</em></h4><figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">-(instancetype)init</div><div class="line">&#123;</div><div class="line">    <span class="built_in">self</span> = [<span class="built_in">super</span> init];</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">self</span>) &#123;</div><div class="line">        <span class="built_in">self</span>.modulesByName  = [[NSMutableDictionary alloc] initWithCapacity:<span class="number">1</span>];</div><div class="line">        <span class="built_in">self</span>.servicesByName  = [[NSMutableDictionary alloc] initWithCapacity:<span class="number">1</span>];</div><div class="line">        <span class="built_in">self</span>.moduleConfigName = @<span class="string">"BeeHive.bundle/BeeHive"</span>;</div><div class="line">        <span class="built_in">self</span>.serviceConfigName = @<span class="string">"BeeHive.bundle/BHService"</span>;<span class="meta"></span></div><div class="line"></div><div class="line">#<span class="meta-keyword">if</span> __IPHONE_OS_VERSION_MAX_ALLOWED &gt; 80400</div><div class="line">        <span class="built_in">self</span>.touchShortcutItem = [BHShortcutItem <span class="keyword">new</span>];<span class="meta"></span></div><div class="line">#<span class="meta-keyword">endif</span></div><div class="line"></div><div class="line">        <span class="built_in">self</span>.openURLItem = [BHOpenURLItem <span class="keyword">new</span>];</div><div class="line">        <span class="built_in">self</span>.notificationsItem = [BHNotificationsItem <span class="keyword">new</span>];</div><div class="line">        <span class="built_in">self</span>.userActivityItem = [BHUserActivityItem <span class="keyword">new</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="built_in">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">+(<span class="keyword">instancetype) </span><span class="keyword">shareInstance</span></div><div class="line">&#123;</div><div class="line">    static <span class="keyword">dispatch_once_t </span>p<span class="comment">;</span></div><div class="line">    static id <span class="keyword">BHInstance </span>= nil<span class="comment">;</span></div><div class="line"></div><div class="line">    <span class="keyword">dispatch_once(&amp;p, </span>^&#123;</div><div class="line">        <span class="keyword">BHInstance </span>= [[[self class] alloc] init]<span class="comment">;</span></div><div class="line">        if ([<span class="keyword">BHInstance </span>isKindOfClass:[<span class="keyword">BHContext </span>class]]) &#123;</div><div class="line">            ((<span class="keyword">BHContext </span>*) <span class="keyword">BHInstance).config </span>= [<span class="keyword">BHConfig </span><span class="keyword">shareInstance];</span></div><div class="line">        &#125;</div><div class="line">    &#125;)<span class="comment">;</span></div><div class="line"></div><div class="line">    return <span class="keyword">BHInstance;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h4 id="系统是在什么时候载入本地的组件信息的呢？答：是在哎BeeHive调用setContext对象的时候，进行调用的。并且这里通过context中的文件名，进行拼接，返回plist文件的信息。-比起在这里将self-BHModules-文件信息换成了响应的实例对象"><a href="#系统是在什么时候载入本地的组件信息的呢？答：是在哎BeeHive调用setContext对象的时候，进行调用的。并且这里通过context中的文件名，进行拼接，返回plist文件的信息。-比起在这里将self-BHModules-文件信息换成了响应的实例对象" class="headerlink" title="系统是在什么时候载入本地的组件信息的呢？答：是在哎BeeHive调用setContext对象的时候，进行调用的。并且这里通过context中的文件名，进行拼接，返回plist文件的信息。 比起在这里将self.BHModules 文件信息换成了响应的实例对象"></a>系统是在什么时候载入本地的组件信息的呢？答：是在哎<code>BeeHive</code>调用<code>setContext</code>对象的时候，进行调用的。并且这里通过<code>context</code>中的文件名，进行拼接，返回plist文件的信息。 <em>比起在这里将self.BHModules 文件信息换成了响应的实例对象</em></h4><hr>
<h4 id="那看到各个Module都会调用modSetUp、modInit类似的方法，那这些方法是在什么时候调用的？答：是在调用父类的Appdelegate的方法的时候调用的，"><a href="#那看到各个Module都会调用modSetUp、modInit类似的方法，那这些方法是在什么时候调用的？答：是在调用父类的Appdelegate的方法的时候调用的，" class="headerlink" title="那看到各个Module都会调用modSetUp、modInit类似的方法，那这些方法是在什么时候调用的？答：是在调用父类的Appdelegate的方法的时候调用的，"></a>那看到各个<code>Module</code>都会调用<code>modSetUp</code>、<code>modInit</code>类似的方法，那这些方法是在什么时候调用的？答：是在调用父类的<code>Appdelegate</code>的方法的时候调用的，</h4><hr>
<h4 id="初了一些主动调用的上面这些方法，那什么时候才会调用系统的方法，类似进入后台、被挂起、进入前台。答：这是在appdelegate的响应方法调用的时候，也会调用。"><a href="#初了一些主动调用的上面这些方法，那什么时候才会调用系统的方法，类似进入后台、被挂起、进入前台。答：这是在appdelegate的响应方法调用的时候，也会调用。" class="headerlink" title="初了一些主动调用的上面这些方法，那什么时候才会调用系统的方法，类似进入后台、被挂起、进入前台。答：这是在appdelegate的响应方法调用的时候，也会调用。"></a>初了一些主动调用的上面这些方法，那什么时候才会调用系统的方法，类似进入后台、被挂起、进入前台。答：这是在appdelegate的响应方法调用的时候，也会调用。</h4></div></article></div></main><footer><div class="paginator"><a href="/2017/02/25/20170225/" class="prev">PREV</a><a href="/2016/11/28/20161128/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://yoursite.com">Ghcoder</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" crossorigin="anonymous"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.js" crossorigin="anonymous"></script><script>$(document).ready(function() { $('pre').each(function(i, block) { hljs.highlightBlock(block); }); });</script></body></html>